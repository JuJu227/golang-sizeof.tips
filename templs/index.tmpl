{{ define "content" }}
<h1>Hello, Gala!</h1>

<div id="editor">{{ .Code }}</div>
<div>
{{ with .Result }}
Sizeof: {{ .Sizeof }}
Alignof: {{ .Alignof }}
<br/>
{{ if .Details }}{{ range $row := .Details }}
  {{ $row.Name }}
  {{ range $ch := $row.Chunks }}
  {{ range $filled := $ch.Cells }}{{ if $filled }}{{ if $ch.IsPadding }}P{{ else }}Y{{ end }}{{ else }}x{{ end }}{{ end }}
  <br/>
  {{ end }}
{{ end }}{{ end }}
{{ end }}
</div>
<div style="color:red">{{ .Error }}</div>

<button type="button" class="btn btn-success" id="gala_go_go">Go!</button>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/ace.js" type="text/javascript"></script>
<script>
    $(function() {
        var editor = ace.edit("editor");
        editor.setTheme("ace/theme/monokai");
        editor.getSession().setMode("ace/mode/golang");
        $("#gala_go_go").click(function() {
            window.location.href = '?t=' + window.btoa(editor.getSession().getValue())
        });
    });
</script>
{{ end }}
